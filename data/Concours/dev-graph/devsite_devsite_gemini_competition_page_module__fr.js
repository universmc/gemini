(function(_ds){var window=this;var I3=function(){return"devsite-gemini-competition-page"},J3=function(a){var b=a.querySelectorAll(".gemini-dialog-cta");for(const c of b){b=c.dataset.dialogTarget;if(!b)continue;const d=a.querySelector(".gemini-dialog[data-dialog="+b+"]");if(!d)continue;b=d.querySelectorAll(".gemini-dialog-close");if(b.length===0)continue;const e=c.dataset.videoId;c.addEventListener("click",()=>{d.showModal();d.classList.add("gemini-dialog--active");e&&a.playVideo(d,e)});for(const f of b)f.addEventListener("click",
g=>{g.preventDefault();d.close();d.classList.remove("gemini-dialog--active");e&&a.stopVideo(d)})}},K3=function(a){a=a.querySelectorAll(".gemini-input-wrapper");for(const b of a){const c=b.querySelector("input");c&&(c.addEventListener("focus",()=>{b.dataset.state="typing"}),c.addEventListener("blur",()=>{b.dataset.state=c.value===""?"empty":"filled"}))}},L3=function(a){const b=a.querySelector(".gemini-competition-countdown-spinner"),c=a.querySelector(".gemini-section__buttons .gemini-competition-sign-in");
c&&c.addEventListener("click",async()=>{b==null||b.classList.remove("hidden");c.classList.add("hidden");await _ds.VM.signIn()});var d=a.querySelector(".gemini-competition-registration-dialog");d&&(d=d.querySelector(".gemini-competition-register-button"))&&d.addEventListener("click",()=>{a.createProfile()})},M3=async function(a){try{a.isSignedIn=await _ds.VM.isSignedIn()}catch(b){}if(a.isSignedIn){try{a.profile=await _ds.VM.Da()}catch(b){}if(a.profile){let b,c;if((b=a.profile)==null?0:(c=_ds.As(b))==
null?0:c.getName()){let d;a.name=((d=_ds.As(a.profile))==null?void 0:d.getName())||""}try{a.j=!!await _ds.aN("AckGeminiCompetitionTosTimestamp")}catch(d){}if(a.j)try{const d=await (new _ds.FH).Id({url:"https://developers.google.com/profile/badges/events/ai/gemini_api_competition"});a.o=!(d==null||!d.id)}catch(d){}}else try{a.name=await _ds.EL.getName()}catch(b){}}},N3=async function(a){var b=a.querySelector(".gemini-competition-countdown-spinner"),c=a.querySelector(".gemini-section__buttons .gemini-competition-sign-in"),
d=a.querySelector(".gemini-section__buttons .gemini-competition-join"),e=a.querySelector(".gemini-section__buttons .gemini-competition-submit");b==null||b.classList.add("hidden");if(a.isSignedIn)if(a.o)e==null||e.classList.remove("hidden"),d==null||d.classList.add("hidden"),c==null||c.classList.add("hidden");else{if(c==null||c.classList.add("hidden"),e==null||e.classList.add("hidden"),d==null||d.classList.remove("hidden"),b=a.querySelector(".gemini-competition-registration-dialog")){c=b.querySelector("#gemini-developer-name");
d=c==null?void 0:c.closest("fieldset");e=b.querySelector("#gemini-competition-newsletter");const f=b.querySelectorAll(".gemini-display-without-profile");b.querySelectorAll(".gemini-display-with-profile").forEach(h=>{h.hidden=!a.profile});f.forEach(h=>{h.hidden=!!a.profile});let g;((g=a.profile)==null?void 0:g.Lf())===2&&e&&(e.checked=!0);c&&d&&(a.profile&&a.name!==""?d.classList.add("hidden"):(d.classList.remove("hidden"),a.name&&(c.value=a.name)))}}else c==null||c.classList.remove("hidden"),d==null||
d.classList.add("hidden"),e==null||e.classList.add("hidden")},O3=class extends _ds.sT{constructor(){super(...arguments);this.isSignedIn=!1;this.name="";this.o=this.j=!1;this.profile=void 0}Sa(){return this}async connectedCallback(){J3(this);K3(this);await super.connectedCallback();L3(this);await M3(this);await N3(this)}async createProfile(){const a=this.querySelector(".gemini-competition-registration-dialog");if(a){var b=a.querySelector("#gemini-developer-name"),c="";if(b&&(c=b.value.trim()||this.name,
c==="")){b.focus();return}var d=a.querySelector("#gemini-competition-newsletter");b=a.querySelector(".gemini-competition-registration-form .gemini-dialog-actions-registration-form");var e=a.querySelector(".gemini-form-error");e==null||e.classList.add("hidden");b==null||b.classList.add("hidden");var f=a.querySelector(".gemini-competition-registration-form .gemini-competition-registration-spinner");f==null||f.classList.remove("hidden");var g=new _ds.dI;d=!(!d||!d.checked);if(this.profile){var h=new _ds.dE;
const k=new _ds.dC;let l;(l=_ds.As(this.profile))!=null&&l.getName()||!c||(_ds.A(h,1,c),_ds.fC(k,"display_name"));let m;c=((m=this.profile)==null?void 0:m.Lf())===2;d!==c&&(_ds.wh(h,31,d?2:1),_ds.fC(k,"badge_email_preference"));if(_ds.oh(k,1,2).length>0)try{_ds.bh(h,9,k);let n;this.profile=(n=await _ds.bI(g,h))==null?void 0:n.Da()}catch(n){}}else try{this.profile=(h=await _ds.aI(g,c,d,!1))==null?void 0:h.Da()}catch(k){}if(this.profile){try{await _ds.bN("AckGeminiCompetitionTosTimestamp"),this.j=!0}catch(k){}if(this.j)try{await (new _ds.FH).Nb({url:"https://developers.google.com/profile/badges/events/ai/gemini_api_competition",
profileId:this.profile.Ea()||""},!1),this.o=!0}catch(k){}}await N3(this);f==null||f.classList.add("hidden");if(this.profile){let k;(k=a.querySelector(".gemini-competition-registration-form-header"))==null||k.classList.add("hidden");let l;(l=a.querySelector(".gemini-competition-registration-form"))==null||l.classList.add("hidden");let m;(m=a.querySelector(".gemini-competition-registration-success-header"))==null||m.classList.remove("hidden");let n;(n=a.querySelector(".gemini-competition-registration-success-body"))==
null||n.classList.remove("hidden");let p;(p=a.querySelector(".gemini-dialog-actions-registration-success"))==null||p.classList.remove("hidden")}else b==null||b.classList.remove("hidden"),e==null||e.classList.remove("hidden")}}playVideo(a,b){if(a=a.querySelector("devsite-video"))_ds.DT(a,b),a.play()}stopVideo(a){(a=a.querySelector("devsite-video"))&&a.stop()}};O3.prototype.connectedCallback=O3.prototype.connectedCallback;O3.getTagName=I3;try{customElements.define(I3(),O3)}catch(a){console.warn("Unrecognized DevSite custom element - DevsiteGeminiCompetitionPage",a)};})(_ds_www);
